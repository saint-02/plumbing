<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diverse General Maintenance — Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#0b78d1;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f4f6fb;
      --radius:12px;
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#0f172a;line-height:1.45}
    header{background:linear-gradient(90deg, #ffffffcc, #ffffffcc);backdrop-filter: blur(6px);position:sticky;top:0;z-index:50;border-bottom:1px solid rgba(15,23,42,0.06)}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;background:var(--accent);border-radius:10px;display:grid;place-items:center;color:#fff;font-weight:700}
    nav a{margin-left:16px;color:inherit;text-decoration:none;font-weight:600}
    .hero{display:grid;grid-template-columns:1fr;gap:20px;padding:48px 24px}
    .hero-card{background:linear-gradient(180deg,#fff,#fbfdff);padding:28px;border-radius:16px;box-shadow:0 8px 20px rgba(11,120,209,0.06)}
    .hero h1{font-size:28px;margin:0 0 12px}
    .lead{color:var(--muted);margin-bottom:18px}
    .cta-row{display:flex;gap:12px;flex-wrap:wrap}
    .btn{display:inline-block;padding:12px 18px;border-radius:10px;text-decoration:none;font-weight:700}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:transparent;border:1px solid rgba(15,23,42,0.08)}

    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:24px}
    .card{background:var(--card);padding:18px;border-radius:14px;box-shadow:0 6px 18px rgba(11,22,40,0.03)}
    .services{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:24px}
    .service{padding:18px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfdff);text-align:center}

    footer{padding:28px 24px;margin-top:28px;border-top:1px solid rgba(15,23,42,0.04)}

    /* responsive */
    @media (max-width:900px){.grid{grid-template-columns:1fr 1fr}.services{grid-template-columns:repeat(2,1fr)}.hero{padding:28px}}
    @media (max-width:600px){.nav{padding:12px 0}.grid{grid-template-columns:1fr}.services{grid-template-columns:1fr}}

    /* small components */
    .form-row{display:flex;gap:10px;align-items:center}
    input,textarea,select{padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);width:100%}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid rgba(15,23,42,0.04);text-align:left}
    .small{font-size:13px;color:var(--muted)}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#eef6ff;color:var(--accent);font-weight:700}
    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.4);display:none;place-items:center;z-index:120}
    .modal{background:#fff;padding:20px;border-radius:12px;width:min(720px,96%);box-shadow:0 20px 60px rgba(2,6,23,0.2)}
    .row{display:flex;gap:12px}
    .col{flex:1}
  </style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="brand">
      <div class="logo">DM</div>
      <div>
        <div style="font-weight:800">Diverse Maintenance</div>
        <div class="small">General maintenance & plumbing</div>
      </div>
    </div>
    <div>
      <a href="#services">Services</a>
      <a href="#book">Book</a>
      <a href="#contact">Contact</a>
      <a href="#dashboard" id="dashboardLink" style="margin-left:12px" class="btn btn-ghost">Dashboard</a>
      <a href="#login" id="loginBtn" class="btn btn-primary">Login</a>
    </div>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div class="hero-card">
      <div style="display:flex;gap:18px;align-items:center;justify-content:space-between;flex-wrap:wrap">
        <div style="flex:1">
          <h1>Fast & reliable plumbing & general maintenance</h1>
          <p class="lead">Experienced technicians for plumbing, electrical, painting, tiling and more — residential & commercial. Book a visit or request a quote.</p>
          <div class="cta-row">
            <a class="btn btn-primary" id="openBook">Book a visit</a>
            <a class="btn btn-ghost" id="openContact">Request quote</a>
          </div>
        </div>
        <div style="width:260px;text-align:center">
          <div class="card" style="padding:18px">
            <div style="font-size:12px;color:var(--muted)">Emergency line</div>
            <div style="font-weight:800;font-size:18px">+264 61 000 000</div>
            <div class="small">Available 24/7</div>
          </div>
        </div>
      </div>

      <div class="services" id="services">
        <div class="service">
          <div style="font-weight:700">Plumbing</div>
          <div class="small">Blocked drains, leak repairs, installs</div>
        </div>
        <div class="service">
          <div style="font-weight:700">Electrical</div>
          <div class="small">Wiring, switches, safety checks</div>
        </div>
        <div class="service">
          <div style="font-weight:700">Painting</div>
          <div class="small">Interior & exterior</div>
        </div>
        <div class="service">
          <div style="font-weight:700">Tiling</div>
          <div class="small">Bathrooms, kitchens, floors</div>
        </div>
      </div>

    </div>
  </section>

  <section style="margin-top:18px" class="grid">
    <div class="card">
      <h3>Why choose us</h3>
      <p class="small">Licensed technicians • Transparent pricing • Fast response • Local company</p>
      <ul class="small">
        <li>Free site inspections</li>
        <li>Work warranty up to 12 months</li>
        <li>Secure online bookings</li>
      </ul>
    </div>
    <div class="card">
      <h3>Our process</h3>
      <ol class="small">
        <li>Book online or call</li>
        <li>We inspect & quote</li>
        <li>Work completed to standard</li>
      </ol>
    </div>
    <div class="card">
      <h3>Testimonials</h3>
      <p class="small">"Quick response and great quality work." — A satisfied customer</p>
    </div>
  </section>

  <!-- Booking modal / system -->
  <div id="modalBackdrop" class="modal-backdrop">
    <div class="modal">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <h3 id="modalTitle">Book a Visit</h3>
        <button id="closeModal">Close</button>
      </div>
      <div id="modalBody" style="margin-top:12px">
        <form id="bookingForm">
          <div class="row">
            <div class="col">
              <label>Full name</label>
              <input id="b_name" required />
            </div>
            <div class="col">
              <label>Phone</label>
              <input id="b_phone" required />
            </div>
          </div>
          <div style="margin-top:10px" class="row">
            <div class="col">
              <label>Email</label>
              <input id="b_email" type="email" />
            </div>
            <div class="col">
              <label>Service</label>
              <select id="b_service">
                <option>Plumbing</option>
                <option>Electrical</option>
                <option>Painting</option>
                <option>Tiling</option>
                <option>Other</option>
              </select>
            </div>
          </div>
          <div style="margin-top:10px" class="row">
            <div class="col">
              <label>Date</label>
              <input id="b_date" type="date" required />
            </div>
            <div class="col">
              <label>Time</label>
              <input id="b_time" type="time" required />
            </div>
          </div>
          <div style="margin-top:10px">
            <label>Notes</label>
            <textarea id="b_notes" rows="3"></textarea>
          </div>

          <div style="margin-top:14px;display:flex;gap:8px;justify-content:flex-end">
            <button type="button" id="saveBooking" class="btn btn-primary">Confirm booking</button>
            <button type="button" id="sendBookingEmail" class="btn btn-ghost">Send as email</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Contact / quote form -->
  <section id="contact" style="margin-top:24px">
    <div class="card">
      <h3>Request a Quote</h3>
      <p class="small">Fill the form and we'll respond within 24 hours.</p>
      <form id="contactForm">
        <div class="row">
          <div class="col">
            <label>Your name</label>
            <input id="c_name" required />
          </div>
          <div class="col">
            <label>Phone</label>
            <input id="c_phone" required />
          </div>
        </div>
        <div style="margin-top:10px">
          <label>Email</label>
          <input id="c_email" type="email" />
        </div>
        <div style="margin-top:10px">
          <label>Message</label>
          <textarea id="c_message" rows="4" required></textarea>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
          <button type="button" id="contactSend" class="btn btn-primary">Send request</button>
        </div>
      </form>
      <p class="small" style="margin-top:8px">Note: This demo includes client-side email sending via EmailJS (replace with your keys) or falls back to mailto.</p>
    </div>
  </section>

  <section id="dashboard" style="margin-top:18px">
    <div class="card">
      <h3>Admin Dashboard (Protected)</h3>
      <p class="small">Only visible after logging in.</p>
      <div id="adminPanel" style="display:none;margin-top:12px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <button id="exportCsv" class="btn btn-ghost">Export CSV</button>
            <button id="clearBookings" class="btn btn-ghost">Clear all</button>
          </div>
          <div class="small">Logged in as <span id="adminName"></span></div>
        </div>
        <div style="margin-top:12px;overflow:auto;max-height:320px">
          <table id="bookingsTable">
            <thead><tr><th>Name</th><th>Phone</th><th>Service</th><th>Date</th><th>Time</th><th>Notes</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <div id="adminLock" style="margin-top:12px">
        <div class="small">You must log in to view bookings. Click <a id="openLoginInline">here to login</a>.</div>
      </div>
    </div>
  </section>

  <footer>
    <div class="small">&copy; <span id="year"></span> Diverse Maintenance — Demo. Built for preview. Replace contact details and email config before production.</div>
  </footer>
</main>

<script>
  // small utility
  const qs = s=>document.querySelector(s);
  document.getElementById('year').textContent=new Date().getFullYear();

  // modal behavior
  const backdrop = qs('#modalBackdrop');
  const modalTitle = qs('#modalTitle');
  qs('#openBook').addEventListener('click', ()=>{openBooking();});
  qs('#openContact').addEventListener('click', ()=>{openContact();});
  qs('#closeModal').addEventListener('click', ()=>{backdrop.style.display='none'});
  backdrop.addEventListener('click', e=>{ if(e.target===backdrop) backdrop.style.display='none' });

  function openBooking(){modalTitle.textContent='Book a Visit';backdrop.style.display='grid'}
  function openContact(){modalTitle.textContent='Request a Quote';backdrop.style.display='grid';  }

  // Simple auth (demo). Replace with server-side logic for production.
  const AUTH_KEY = 'dm_auth_user';
  function setUser(name){localStorage.setItem(AUTH_KEY, JSON.stringify({name, ts:Date.now()}));updateAuthUI();}
  function clearUser(){localStorage.removeItem(AUTH_KEY);updateAuthUI();}
  function getUser(){try{return JSON.parse(localStorage.getItem(AUTH_KEY))}catch(e){return null}}

  function updateAuthUI(){
    const user = getUser();
    if(user){qs('#loginBtn').textContent='Logout'; qs('#dashboardLink').style.display='inline-block'; qs('#adminPanel').style.display='block'; qs('#adminLock').style.display='none'; qs('#adminName').textContent=user.name}else{qs('#loginBtn').textContent='Login'; qs('#dashboardLink').style.display='inline-block'; qs('#adminPanel').style.display='none'; qs('#adminLock').style.display='block'; qs('#adminName').textContent=''}
  }
  updateAuthUI();

  // Login flow (inline modal)
  qs('#loginBtn').addEventListener('click', ()=>{
    const user=getUser();
    if(user){ if(confirm('Logout?')){clearUser()} } else {
      const name = prompt('Admin name (demo)');
      if(name){ const pass = prompt('Password (demo)'); // demo: accept any password except blank
        if(pass!==null) setUser(name);
      }
    }
  });
  qs('#openLoginInline').addEventListener('click', ()=>{qs('#loginBtn').click()});

  // Bookings storage utility
  const BOOKING_KEY = 'dm_bookings_v1';
  function loadBookings(){return JSON.parse(localStorage.getItem(BOOKING_KEY) || '[]')}
  function saveBookings(arr){localStorage.setItem(BOOKING_KEY, JSON.stringify(arr));}

  function refreshBookingsTable(){
    const tbody = qs('#bookingsTable tbody'); tbody.innerHTML='';
    const arr = loadBookings();
    arr.forEach(b=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${escapeHtml(b.name)}</td><td>${escapeHtml(b.phone)}</td><td>${escapeHtml(b.service)}</td><td>${escapeHtml(b.date)}</td><td>${escapeHtml(b.time)}</td><td>${escapeHtml(b.notes)}</td>`;
      tbody.appendChild(tr);
    });
  }

  function escapeHtml(s){if(!s) return ''; return s.replace(/[&<>\"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));}

  qs('#saveBooking').addEventListener('click', ()=>{
    const b = {name:qs('#b_name').value, phone:qs('#b_phone').value, email:qs('#b_email').value, service:qs('#b_service').value, date:qs('#b_date').value, time:qs('#b_time').value, notes:qs('#b_notes').value, created:new Date().toISOString()};
    if(!b.name||!b.phone||!b.date||!b.time){alert('Please fill required fields');return}
    const arr = loadBookings(); arr.push(b); saveBookings(arr); refreshBookingsTable(); backdrop.style.display='none'; alert('Booking saved locally.');
  });

  qs('#sendBookingEmail').addEventListener('click', ()=>{
    // Try to open mailto with booking details — simple fallback for demos.
    const subject = encodeURIComponent('New booking request');
    const body = encodeURIComponent(`Name: ${qs('#b_name').value}\nPhone: ${qs('#b_phone').value}\nEmail: ${qs('#b_email').value}\nService: ${qs('#b_service').value}\nDate: ${qs('#b_date').value} ${qs('#b_time').value}\nNotes: ${qs('#b_notes').value}`);
    window.location.href = `mailto:you@domain.com?subject=${subject}&body=${body}`;
  });

  // Contact form sending (with EmailJS placeholder)
  qs('#contactSend').addEventListener('click', ()=>{
    const data = {name:qs('#c_name').value, phone:qs('#c_phone').value, email:qs('#c_email').value, message:qs('#c_message').value};
    if(!data.name||!data.phone||!data.message){alert('Please fill name, phone and message');return}

    // Attempt to use EmailJS (replace service/template/user ids below) — if not configured, fall back to mailto
    if(window.emailjs){
      // configure these values in the code below before using in production
      const serviceID = 'YOUR_SERVICE_ID';
      const templateID = 'YOUR_TEMPLATE_ID';
      try{
        emailjs.send(serviceID, templateID, data).then(()=>{alert('Message sent (via EmailJS)');qs('#contactForm').reset();}, (err)=>{console.error(err);alert('EmailJS error — falling back to mailto'); window.location.href = `mailto:you@domain.com?subject=Contact&body=${encodeURIComponent(JSON.stringify(data,null,2))}`});
      }catch(e){window.location.href = `mailto:you@domain.com?subject=Contact&body=${encodeURIComponent(JSON.stringify(data,null,2))}`}
    } else {
      window.location.href = `mailto:you@domain.com?subject=Contact&body=${encodeURIComponent(JSON.stringify(data,null,2))}`
    }
  });

  // Admin utilities
  qs('#exportCsv').addEventListener('click', ()=>{
    const arr = loadBookings(); if(arr.length===0){alert('No bookings');return}
    const rows = [['Name','Phone','Email','Service','Date','Time','Notes','Created']];
    arr.forEach(r=>rows.push([r.name,r.phone,r.email,r.service,r.date,r.time,r.notes,r.created]));
    const csv = rows.map(r=>r.map(c=>`"${String(c||'').replace(/"/g,'""')}"`).join(',')).join('\n');
    const blob = new Blob([csv],{type:'text/csv'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='bookings.csv'; a.click(); URL.revokeObjectURL(url);
  });
  qs('#clearBookings').addEventListener('click', ()=>{ if(confirm('Clear all bookings?')){saveBookings([]);refreshBookingsTable()} });

  // initial render
  refreshBookingsTable();

  // Small note: EmailJS quick-start
  // 1) Create an account at https://www.emailjs.com/
  // 2) Create a service and template, then replace YOUR_SERVICE_ID and YOUR_TEMPLATE_ID above
  // 3) Add the EmailJS SDK to the page and call emailjs.init('YOUR_USER_ID') before sending.
  // Example (uncomment to use):
  // <script src="https://cdn.emailjs.com/sdk/3.2.0/email.min.js"></script>
  // emailjs.init('YOUR_USER_ID');

  // Accessibility & UX small improvements could be added: server-side auth, CAPTCHA, server email endpoint, timezone handling, real calendar integration (Google Calendar API), payment integration, scheduling availability checks, photos, SEO meta tags, and content edits.

</script>
</body>
</html>
